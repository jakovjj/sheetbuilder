<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SheetBuilder - Smart Image Layout for Printing (Gang Sheets, DTF and more)</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="title-section">
                    <div class="title-row">
                        <img src="logo.png" alt="SheetBuilder" class="header-brand-image" onerror="this.style.display='none'">
                    </div>
                    <p>Free smart image layout for optimal printing (gang sheets, DTF and more)</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <main>
            <section id="howto" class="intro-section">
                <h2><span class="section-icon" aria-hidden="true"><i class="fa-solid fa-circle-info"></i></span>How to use SheetBuilder</h2>
                <div class="howto-content">
                    <p class="howto-paragraph">Upload your images, set each image size (mm) and copies (or use Bulk Edit), then choose your paper size and margins. When you’re ready, click Generate Layout and then Export to PDF.</p>
                    <p class="howto-note">Tip: You can drag & drop images, or paste from clipboard.</p>
                </div>
            </section>

            <section id="upload" class="upload-section">
                <h2><span class="section-icon" aria-hidden="true"><i class="fa-solid fa-folder-open"></i></span>Upload Images</h2>
                <div class="file-upload">
                    <input type="file" id="imageInput" multiple accept="image/*">
                    <label for="imageInput" class="upload-btn">
                        <span class="upload-icon" aria-hidden="true"><i class="fa-solid fa-paperclip"></i></span>
                        Choose Images
                    </label>
                    <div class="upload-info">
                        <p>Drag & drop images here, click to browse, or paste from clipboard</p>
                        <p class="upload-formats">Supports: JPG, PNG, GIF, WEBP</p>
                    </div>
                </div>
            </section>

            <section id="images" class="images-section">
                <h2><span class="section-icon" aria-hidden="true"><i class="fa-regular fa-images"></i></span>Image Configuration</h2>
                
                <!-- Bulk Edit Section -->
                <div class="bulk-edit-section">
                    <h3 onclick="sheetBuilder.toggleBulkEdit()" class="bulk-edit-header">
                        <span class="section-icon" aria-hidden="true"><i class="fa-solid fa-boxes-stacked"></i></span>Bulk Edit Selected Images<span id="bulkToggleIcon" class="toggle-icon collapsed"></span>
                    </h3>
                    <div class="bulk-controls collapsed" id="bulkControls">
                        <div>
                            <button id="selectAll" class="bulk-btn">Select All</button>
                            <button id="selectNone" class="bulk-btn">Select None</button>
                            <button id="removeSelected" class="bulk-btn danger">Remove Selected</button>
                        </div>
                        <div class="bulk-inputs">
                            <span id="selectionCount">0 images selected</span>
                            <div class="bulk-input-group">
                                <label>Width (mm):</label>
                                <input type="number" id="bulkWidth" min="1" step="0.1" placeholder="Width">
                            </div>
                            <div class="bulk-input-group">
                                <label>Height (mm):</label>
                                <input type="number" id="bulkHeight" min="1" step="0.1" placeholder="Height">
                            </div>
                            <div class="bulk-input-group">
                                <label>Copies:</label>
                                <input type="number" id="bulkCopies" min="1" placeholder="Copies">
                            </div>
                            <button id="applyBulkChanges" class="action-btn primary">Apply to Selected</button>
                        </div>
                    </div>
                </div>
                
                <!-- Images List -->
                <div id="imagesList" class="images-list"></div>
                
                <!-- Quick Selection Controls (shown when images exist) -->
                <div id="quickSelectionControls" class="quick-selection-controls hidden">
                    <div class="quick-selection-content">
                        <span class="quick-selection-icon" aria-hidden="true"><i class="fa-solid fa-bolt"></i></span>
                        <span class="quick-selection-label">Quick Actions:</span>
                        <div class="quick-selection-buttons">
                            <button id="quickSelectAll" class="quick-select-btn select-all">
                                <span class="btn-icon" aria-hidden="true"><i class="fa-regular fa-square-check"></i></span>
                                <span>Select All</span>
                            </button>
                            <button id="quickSelectNone" class="quick-select-btn select-none">
                                <span class="btn-icon" aria-hidden="true"><i class="fa-regular fa-square"></i></span>
                                <span>Select None</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="settings" class="settings-section">
                <h2><span class="section-icon" aria-hidden="true"><i class="fa-solid fa-gear"></i></span>Print Settings</h2>
                <div class="settings-grid">
                    <div class="setting-group">
                        <label for="paperSize">Paper Size:</label>
                        <select id="paperSize">
                            <option value="custom">Custom</option>
                            <option value="a4" selected>A4 (210×297mm)</option>
                            <option value="a3">A3 (297×420mm)</option>
                            <option value="a5">A5 (148×210mm)</option>
                            <option value="letter">Letter (216×279mm)</option>
                            <option value="legal">Legal (216×356mm)</option>
                            <option value="tabloid">Tabloid (279×432mm)</option>
                            <option value="photo4x6">Photo 4×6 (102×152mm)</option>
                            <option value="photo5x7">Photo 5×7 (127×178mm)</option>
                            <option value="photo8x10">Photo 8×10 (203×254mm)</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="paperWidth">Paper Width (mm):</label>
                        <input type="number" id="paperWidth" value="210" min="1">
                    </div>
                    <div class="setting-group">
                        <label for="paperHeight">Paper Height (mm):</label>
                        <input type="number" id="paperHeight" value="297" min="1">
                    </div>
                    <div class="setting-group">
                        <label for="outerMargin">Outer Margin (mm):</label>
                        <input type="number" id="outerMargin" value="10" min="0" step="0.1">
                    </div>
                    <div class="setting-group">
                        <label for="innerMargin">Image Spacing (mm):</label>
                        <input type="number" id="innerMargin" value="5" min="0" step="0.1">
                        <small>Space between images</small>
                    </div>
                    <div class="setting-group">
                        <label for="rotateImages">Allow Rotation:</label>
                        <div class="checkbox-group">
                            <input type="checkbox" id="rotateImages" checked>
                            <label for="rotateImages" class="checkbox-label">Rotate images for better fit</label>
                        </div>
                    </div>
                </div>
            </section>

            <section id="actions" class="actions-section">
                <button id="generateLayout" class="action-btn primary">
                    <span class="btn-icon" aria-hidden="true"><i class="fa-solid fa-bullseye"></i></span>
                    Generate Layout
                </button>
                <button id="exportPDF" class="action-btn secondary">
                    <span class="btn-icon" aria-hidden="true"><i class="fa-regular fa-file-pdf"></i></span>
                    Export to PDF
                </button>
            </section>

            <!-- Loading Overlay -->
            <div id="loadingOverlay" class="loading-overlay hidden">
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <h3>Generating Layout...</h3>
                    <p>Optimizing image placement for maximum efficiency</p>
                </div>
            </div>

            <!-- Export Overlay -->
            <div id="exportOverlay" class="loading-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="exportTitle">
                <div class="loading-content export-content">
                    <div class="loading-spinner"></div>
                    <h3 id="exportTitle">Exporting to PDF...</h3>
                    <p id="exportStatus">Starting…</p>
                    <div class="export-progress" aria-hidden="true">
                        <div id="exportProgressBar" class="export-progress-bar" style="width: 0%"></div>
                    </div>
                    <div id="exportProgressText" class="export-progress-text">0%</div>
                    <button id="cancelExport" class="action-btn secondary" type="button">Cancel</button>
                </div>
            </div>

            <section id="preview" class="preview-section">
                <h2><span class="section-icon" aria-hidden="true"><i class="fa-regular fa-eye"></i></span>Layout Preview</h2>
                <div id="layoutPreview" class="layout-preview"></div>
                <div id="layoutStats" class="layout-stats"></div>
            </section>
        </main>
        
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-info">
                    <p>&copy; 2025 Glare Studios. All rights reserved.</p>
                </div>
                <div class="footer-actions">
                    <form action="https://paypal.me/itsjakovj" method="post" target="_top">
                        <input type="hidden" name="business" value="jakov@jandric.com" />
                        <input type="hidden" name="currency_code" value="USD" />
                        <input type="hidden" name="item_name" value="Buy me a coffee" />
                        <button type="submit" class="paypal-btn" title="Buy me a coffee">
                            <span class="section-icon" aria-hidden="true"><i class="fa-solid fa-mug-hot"></i></span>Buy me a coffee
                        </button>
                    </form>
                </div>
            </div>
        </footer>
    </div>

    <!-- Image Modal/Lightbox -->
    <div id="imageModal" class="image-modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <button class="modal-close" title="Close (ESC)">&times;</button>
            <img id="modalImage" class="modal-image" src="" alt="Full size image">
            <div class="modal-info">
                <span id="modalImageName" class="image-name"></span>
                <span id="modalImageSize" class="image-size"></span>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
